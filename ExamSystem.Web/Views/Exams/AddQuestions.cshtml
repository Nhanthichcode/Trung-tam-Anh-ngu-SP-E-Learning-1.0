@model IEnumerable<ExamSystem.Core.Entities.Question>

@{
    ViewData["Title"] = "Soạn đề thi: " + ViewData["ExamTitle"];
}

<div class="container">
    <h2 class="text-primary">Soạn đề cho: @ViewData["ExamTitle"]</h2>
    <p class="text-muted">Tích chọn các câu hỏi bạn muốn thêm vào đề thi này.</p>

    <form asp-action="AddQuestions" method="post">
        <input type="hidden" name="examId" value="@ViewData["ExamId"]" />

        <div class="card shadow-sm p-3 mb-4">
            <button type="submit" class="btn btn-success btn-lg">
                <i class="fa fa-save"></i> Lưu câu hỏi vào đề
            </button>
            <a asp-action="Index" class="btn btn-secondary ml-2">Hủy bỏ</a>
        </div>

        <table class="table table-hover table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th class="text-center" style="width: 50px;">
                        <input type="checkbox" id="selectAll" />
                    </th>
                    <th>Nội dung câu hỏi</th>
                    <th>Loại</th>
                    <th>Mức độ</th>
                    <th>Chủ đề</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td class="text-center">
                            <input type="checkbox" name="selectedQuestions" value="@item.Id" class="question-checkbox" />
                        </td>
                        <td>
                            <strong>@item.Content</strong>
                            @if (!string.IsNullOrEmpty(item.MediaUrl))
                            {
                                <span class="badge bg-info text-dark">Có Media</span>
                            }
                        </td>
                        <td>@item.Type</td>
                        <td>
                            @if (item.Level == 1)
                            {
                                <span class="badge bg-success">Dễ</span>
                            }
                            else if (item.Level == 2)
                            {

                                <span class="badge bg-warning text-dark">Vừa</span>
                            }
                            else
                            {

                                <span class="badge bg-danger">Khó</span>
                            }
                        </td>
                        
                    </tr>
                }
            </tbody>
        </table>

        <div class="mt-3">
            <button type="submit" class="btn btn-success">Lưu câu hỏi vào đề</button>
        </div>
    </form>
</div>

<script>
    document.getElementById('selectAll').onclick = function() {
        var checkboxes = document.querySelectorAll('.question-checkbox');
        for (var checkbox of checkboxes) {
            checkbox.checked = this.checked;
        }
    }
</script>