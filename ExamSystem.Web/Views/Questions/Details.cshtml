@model ExamSystem.Core.Entities.Question
@using ExamSystem.Core.Enums

@{
    ViewData["Title"] = "Chi tiết câu hỏi";
}

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="text-primary"><i class="fa fa-info-circle"></i> Chi tiết câu hỏi #@Model.Id</h3>
        <div>
            <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning"><i class="fa fa-pencil"></i> Sửa</a>
            <a asp-action="Index" class="btn btn-secondary"><i class="fa fa-arrow-left"></i> Quay lại</a>
        </div>
    </div>

    <div class="card shadow-sm border-top-0 border-end-0 border-bottom-0 border-5 border-info">
        <div class="card-body">

            <div class="mb-3">
                <span class="badge bg-primary fs-6 me-2">@Model.Type</span>
                <span class="badge bg-dark fs-6 me-2">Level @Model.Level</span>
                <span class="text-muted small"><i class="fa fa-calendar"></i> Ngày tạo: @Model.CreatedDate.ToString("dd/MM/yyyy HH:mm")</span>
            </div>

            @if (Model.Type == QuestionType.ReadingPassage && !string.IsNullOrEmpty(Model.PassageText))
            {
                <div class="alert alert-success">
                    <h5 class="alert-heading fw-bold"><i class="fa fa-book"></i> Nội dung bài đọc (Passage):</h5>
                    <hr>
                    <div style="white-space: pre-wrap;">@Model.PassageText</div>
                </div>
            }

            <h4 class="card-title fw-bold text-dark mt-3">@Model.Content</h4>

            @if (!string.IsNullOrEmpty(Model.MediaUrl))
            {
                <div class="my-3 p-3 bg-light rounded border">
                    <label class="fw-bold d-block mb-2"><i class="fa fa-paperclip"></i> File đính kèm:</label>
                    @if (Model.MediaUrl.EndsWith(".mp3") || Model.MediaUrl.EndsWith(".wav"))
                    {
                        <audio controls class="w-100">
                            <source src="@Model.MediaUrl">
                        </audio>
                    }
                    else if (Model.MediaUrl.EndsWith(".jpg") || Model.MediaUrl.EndsWith(".png"))
                    {
                        <img src="@Model.MediaUrl" class="img-fluid rounded shadow-sm" style="max-height: 300px;" />
                    }
                    else
                    {
                        <a href="@Model.MediaUrl" target="_blank" class="btn btn-sm btn-outline-primary">Tải xuống file</a>
                    }
                </div>
            }

            <hr />

            <div class="row">
                <div class="col-md-6 mb-3">
                    <ul class="list-group">
                        <li class="list-group-item @(Model.CorrectAnswer == "A" ? "list-group-item-success fw-bold" : "")">
                            <span class="fw-bold me-2">A.</span> @Model.OptionA
                            @if (Model.CorrectAnswer == "A")
                            {
                                <i class="fa fa-check float-end"></i>
                            }
                        </li>
                        <li class="list-group-item @(Model.CorrectAnswer == "B" ? "list-group-item-success fw-bold" : "")">
                            <span class="fw-bold me-2">B.</span> @Model.OptionB
                            @if (Model.CorrectAnswer == "B")
                            {
                                <i class="fa fa-check float-end"></i>
                            }
                        </li>
                    </ul>
                </div>
                <div class="col-md-6 mb-3">
                    <ul class="list-group">
                        <li class="list-group-item @(Model.CorrectAnswer == "C" ? "list-group-item-success fw-bold" : "")">
                            <span class="fw-bold me-2">C.</span> @Model.OptionC
                            @if (Model.CorrectAnswer == "C")
                            {
                                <i class="fa fa-check float-end"></i>
                            }
                        </li>
                        <li class="list-group-item @(Model.CorrectAnswer == "D" ? "list-group-item-success fw-bold" : "")">
                            <span class="fw-bold me-2">D.</span> @Model.OptionD
                            @if (Model.CorrectAnswer == "D")
                            {
                                <i class="fa fa-check float-end"></i>
                            }
                        </li>
                    </ul>
                </div>
            </div>

            @if (!string.IsNullOrEmpty(Model.Explaination))
            {
                <div class="alert alert-warning mt-3">
                    <strong><i class="fa fa-lightbulb-o"></i> Giải thích:</strong> @Model.Explaination
                </div>
            }
        </div>
    </div>
</div>